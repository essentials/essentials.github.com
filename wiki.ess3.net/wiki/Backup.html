<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" dir="ltr">
<head>
<title>Backup - Essentials</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="MediaWiki 1.16.5" />
<link rel="shortcut icon" href="../favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.ess3.net/w/opensearch_desc.php" title="Essentials (en)" />
<link title="Creative Commons" type="application/rdf+xml" href="http://wiki.ess3.net/w/index.php?title=Backup&amp;action=creativecommons" rel="meta" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-nc-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Essentials Atom feed" href="http://wiki.ess3.net/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://essentials3.net/cache/skins/common/shared.css?270" media="screen" />
<link rel="stylesheet" href="http://essentials3.net/cache/skins/common/commonPrint.css?270" media="print" />
<link rel="stylesheet" href="http://essentials3.net/cache/skins/cavendish/main.css?270" media="screen" />
<link rel="stylesheet" href="http://essentials3.net/cache/skins/cavendish/print.css?270" media="print" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="http://essentials3.net/cache/skins/cavendish/IE50Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="http://essentials3.net/cache/skins/cavendish/IE55Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="http://essentials3.net/cache/skins/cavendish/IE60Fixes.css?270" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="http://essentials3.net/cache/skins/cavendish/IE70Fixes.css?270" media="screen" /><![endif]-->
<link rel="stylesheet" href="http://wiki.ess3.net/w/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="http://wiki.ess3.net/w/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" media="print" />
<link rel="stylesheet" href="http://wiki.ess3.net/w/index.php?title=MediaWiki:Cavendish.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" />
<link rel="stylesheet" href="http://wiki.ess3.net/w/index.php?title=-&amp;action=raw&amp;maxage=18000&amp;gen=css" />
<script>
var skin="cavendish",
stylepath="http://essentials3.net/cache/skins",
wgUrlProtocols="http\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/wiki/$1",
wgScriptPath="/w",
wgScriptExtension=".php",
wgScript="/w/index.php",
wgVariantArticlePath=false,
wgActionPaths={},
wgServer="http://wiki.ess3.net",
wgCanonicalNamespace="",
wgCanonicalSpecialPageName=false,
wgNamespaceNumber=0,
wgPageName="Backup",
wgTitle="Backup",
wgAction="view",
wgArticleId=14,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=false,
wgCurRevisionId=1043,
wgVersion="1.16.5",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "Essentials", "5": "Essentials talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "essentials": 4, "essentials_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "image": 6, "image_talk": 7},
wgSiteName="Essentials",
wgCategories=[],
wgRestrictionEdit=["autoconfirmed"],
wgRestrictionMove=["autoconfirmed"];
</script><script src="http://essentials3.net/cache/skins/common/wikibits.js?270"></script>
<script src="http://essentials3.net/cache/skins/common/ajax.js?270"></script>
<!--[if lt IE 7]><script type="text/javascript" src="http://essentials3.net/cache/skins/common/IEFixes.js?270"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
	<!--[if gte IE 9]><style type="text/css">.gradient { filter: none; }</style><![endif]-->
<script src="http://wiki.ess3.net/w/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=cavendish&amp;270"></script>

</head>
<body class="mediawiki ltr ns-0 ns-subject page-Backup skin-cavendish">
<div id="internal"></div>
<!-- Skin-Version: 1.0.0-->
<div id="globalWrapper">

	<div id="p-personal">
		<ul class="top-nav">
						
			<li id="pt-login" class=" top-nav-element">
				<span class="top-nav-left">&nbsp;</span>
				<a class="top-nav-mid " 
				   href="http://wiki.ess3.net/w/index.php?title=Special:UserLogin&amp;returnto=Backup">
				   Log in / create account</a>	
				<span class="top-nav-right">&nbsp;</span>
							</li>
		</ul>
	</div>

	<div id="header" class="gradient">
		<a name="top" id="contentTop"></a>
        <a id="esslogo" href="../index.html" title="Main Page">Backup - Essentials</a>
		<ul>
    
                 <li id="ca-nstab-main" class="selected"><a href="Backup.html" title="View the content page [c]" accesskey="c">Page</a></li>
                 <li id="ca-talk" class="new"><a href="http://wiki.ess3.net/w/index.php?title=Talk:Backup&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
                 <li id="ca-viewsource"><a href="http://wiki.ess3.net/w/index.php?title=Backup&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
                 <li id="ca-history"><a href="http://wiki.ess3.net/w/index.php?title=Backup&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>            </ul>
		<form name="searchform" action="http://wiki.ess3.net/w/index.php" id="searchform">
			<div>
			<label for="searchInput">Search</label>
			<input type="hidden" name="title" value="Special:Search"/>
			<input id="searchInput" name="search" type="text" title="Search Essentials [f]" accesskey="f" value="" />
			<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
			<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
	       </div>
		</form>
	</div>

	<div id="mBody">
	
		<div id="side">
			<ul id="nav">
				<li class='generated-sidebar portlet' id='p-Essentials_Wiki'>
		<span>Essentials Wiki</span>
			<ul class='pBody'>
				<li id="n-News"><a href="Essentials_News.html">News</a></li>
				<li id="n-Download-Portal"><a href="Downloads.html">Download Portal</a></li>
				<li id="n-Command-Guide"><a href="Command_Reference.html">Command Guide</a></li>
				<li id="n-Permissions-List"><a href="Command_Reference/Perm.html">Permissions List</a></li>
				<li id="n-Install-Guide"><a href="Downloads.html">Install Guide</a></li>
				<li id="n-Tutorials"><a href="Tutorials.html">Tutorials</a></li>
				<li id="n-FAQ"><a href="FAQ.html">FAQ</a></li>
				<li id="n-Donate"><a href="Donations.html">Donate</a></li>
				<li id="n-Help"><a href="Help.html">Help</a></li>
			</ul>
	</li>
	<li class='generated-sidebar portlet' id='p-Development_Links'>
		<span>Development Links</span>
			<ul class='pBody'>
				<li id="n-Changelog"><a href="https://github.com/essentials/Essentials/commits/2.9">Changelog</a></li>
				<li id="n-GIT-Repository"><a href="https://github.com/essentials/Essentials">GIT Repository</a></li>
				<li id="n-Build-Server"><a href="http://ci.ess3.net/?guest=1">Build Server</a></li>
			</ul>
	</li>
				
			</ul>
			
<script type="text/javascript"><!--
google_ad_client = "ca-pub-0790686144654653";
/* Ess Tall */
google_ad_slot = "4077481570";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
		</div><!-- end of SIDE div -->
		<div id="column-content">
			<div id="content">
				<a id="top"></a>
	        		        	<h1 id="firstHeading" class="firstHeading">Backup</h1>
				<div id="bodyContent">
		            <h3 id="siteSub">From Essentials</h3>
		            <div id="contentSub"></div>
		            		            		            <div id="jump-to-nav">Jump to: <a href="Backup.html#column-one">navigation</a>, <a href="Backup.html#searchInput">search</a></div>					<!-- start content -->
					<p>To use the backup function you will need to define some settings in the essentials config file and also create a script to run each scheduled backup.
</p><p>The backup will run every interval (defined in the config file) assuming that there was changes made to the server since the previous backup.
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Backup.html#Config"><span class="tocnumber">1</span> <span class="toctext">Config</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Backup.html#Example"><span class="tocnumber">1.1</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="Backup.html#Just_Save"><span class="tocnumber">1.2</span> <span class="toctext">Just Save</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="Backup.html#Microsoft_Windows_XP.2FVista.2F7.2F8"><span class="tocnumber">2</span> <span class="toctext">Microsoft Windows XP/Vista/7/8</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="Backup.html#Example_1"><span class="tocnumber">2.1</span> <span class="toctext">Example 1</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="Backup.html#Instructions"><span class="tocnumber">2.1.1</span> <span class="toctext">Instructions</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="Backup.html#Batch_File"><span class="tocnumber">2.1.2</span> <span class="toctext">Batch File</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="Backup.html#Linux"><span class="tocnumber">3</span> <span class="toctext">Linux</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="Backup.html#Example_1_2"><span class="tocnumber">3.1</span> <span class="toctext">Example 1</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="Backup.html#Instructions_2"><span class="tocnumber">3.1.1</span> <span class="toctext">Instructions</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="Backup.html#Bash_file"><span class="tocnumber">3.1.2</span> <span class="toctext">Bash file</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr></table><script>if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<h2> <span class="mw-headline" id="Config"> Config </span></h2>
<p>You need to configure 2 settings for the backup script to work.  The interval and the command.
</p>
<h3> <span class="mw-headline" id="Example"> Example </span></h3>
<pre># Backup runs a command while saving is disabled
backup:
  # Interval in minutes
  interval: 60
  # Add a command that backups your data, e.g.
  command: 'backup.bat'
</pre>
<h3> <span class="mw-headline" id="Just_Save"> Just Save </span></h3>
<p>If you don't want to actually use a backup script, you can use Essentials Backup to force a regular save.
</p><p>There is no way to run arbitrary console commands, but if you use the following syntax, Essentials will do the normal force save all, but won't try to run any backup script.
</p>
<pre>backup:
  interval: 60
  command: 'save-all'
</pre>
<h2> <span class="mw-headline" id="Microsoft_Windows_XP.2FVista.2F7.2F8"> Microsoft Windows XP/Vista/7/8 </span></h2>
<p>The easiest way to create a backup script in Windows is to create a bat or batch file.  With Craftbukkit on Windows the backup command will be run from Craftbukkit's location rather than from essentials or the configuration folders.  Any commands available to this folder can be run, as well as any commands available in the global path.
</p><p>If you are creating a custom backup script for the occasion it would be sensible to place it in this folder and use relative links to the world folders below.
</p>
<h3> <span class="mw-headline" id="Example_1"> Example 1 </span></h3>
<p>This batch file example creates a hourly backup and a daily backup. Hourly backups older than 2 days will be deleted, and weekly backups older than 2 weeks will be deleted.  This example doesn't zip up the backups but does create a separate folder for each backup.  This backup format should be compatible with [<a href="http://wiki.sk89q.com/wiki/WorldEdit/Snapshots" class="external text" rel="nofollow">WorldEdit snapshots</a>].
</p>
<h4> <span class="mw-headline" id="Instructions"> Instructions </span></h4>
<ul><li>Open notepad
</li><li>Copy and paste the code below.
</li><li>Replace 'World' on the first line with the name of the world you wish to backup.
</li><li>Duplicate this line for as many worlds as you wish to backup
</li><li>Save this file as something like 'backup.bat' into your minecraft server folder (not plugins) making sure you choose to save as 'all files' not as a text document.
</li><li>Edit the line in your config.yml in the essentials plugin folder to the same name as the file you just created for example: command: 'backup.bat'
</li><li>Run the script, and check for the folder (default Backup).
</li></ul>
<h4> <span class="mw-headline" id="Batch_File"> Batch File </span></h4>
<pre>@ECHO OFF
SET itdate=%date:~-10%
SET itdate=%itdate:~6,4%-%itdate:~3,2%-%itdate:~0,2%
echo Current date:&nbsp;%itdate%
xcopy /e /c /h /i /v /r /y /q World Backup\%itdate%D\
xcopy /e /c /h /i /v /r /y /q plugins Backup\%itdate%D\plugins\
SET hour=%time:~0,2%
IF "%hour:~0,1%" == " " SET hour=0%hour:~1,1%
xcopy /e /c /h /i /v /r /y /q Backup\%itdate%D Backup\%itdate%-%hour%H\
echo Backup Complete (assuming no errors above).  Attempting to remove old files..
forfiles /p "Backup" /m "*H" /c "cmd /c rmdir /s /q @path" /d -2
forfiles /p "Backup" /m "*D" /c "cmd /c rmdir /s /q @path" /d -14
</pre>
<h2> <span class="mw-headline" id="Linux"> Linux </span></h2>
<p>The easiest way to create a backup script in Linux is to create a bash script.
</p>
<h3> <span class="mw-headline" id="Example_1_2"> Example 1 </span></h3>
<p>This bash file example creates a zip backup of multiple worlds folders, this script is to be used with a multiverse config or with nether enabled.  The zip files will be named with the current date and time.  Hourly backups older than 2 days will be deleted, and weekly backups older than 2 weeks will be deleted. This backup format should be compatible with [<a href="http://wiki.sk89q.com/wiki/WorldEdit/Snapshots" class="external text" rel="nofollow">WorldEdit snapshots</a>].
</p>
<h4> <span class="mw-headline" id="Instructions_2"> Instructions </span></h4>
<ul><li>Navigate to your Minecraft server folder.
</li><li>Create a shell file: nano backup.sh
</li><li>Copy and paste the code below
</li><li>Replace (world nether) with a list of worlds separated by spaces. The example below will backup 'world' and 'nether'.
</li><li>Save the file.
</li><li>Change the file permission to make it executable: chmod +x backup.sh
</li><li>Edit the line in your config.yml in the essentials plugin folder to the same name as the file you just created for example: command: 'backup.sh'(note: on certain systems you will need to provide the full path: command: '/minecraft/backup.sh')
</li></ul>
<h4> <span class="mw-headline" id="Bash_file"> Bash file </span></h4>
<pre>#!/bin/bash
# Set these values to match your server's settings.

# This script should be located in the craftbukkit folder

# Make sure you change this to the name of your world folder! 
# Add additional worlds by separating them with a space. 

declare -a worlds=(world world_nether)
backupdir=backups/
ext=.zip

hdateformat=$(date '+%Y-%m-%d-%H-%M-%S')H$ext
ddateformat=$(date '+%Y-%m-%d')D$ext
numworlds=${#worlds[@]}

    echo "Starting multiworld backup..."
 
    if [ -d $backupdir ]&nbsp;; then
        sleep 0
    else
        mkdir -p $backupdir
    fi
    zip $backupdir$hdateformat -r plugins
    for ((i=0;i&lt;$numworlds;i++)); do
        zip -q $backupdir$hdateformat -r ${worlds[$i]}
        echo "Saving '${worlds[$i]}' to '$backupdir$hdateformat'."
    done
    cp $backupdir$hdateformat $backupdir$ddateformat
    echo "Updated daily backup."
    find $backupdir/ -name *H$ext -mmin +1440 -exec rm {} \;
    find $backupdir/ -name *D$ext -mtime +14 -exec rm {} \;
    echo "Removed old backups." 
 
    echo "Backup complete."

exit 0
</pre>
<!-- 
NewPP limit report
Preprocessor node count: 43/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key ess_wiki-mw_:pcache:idhash:14-0!1!0!!en!2!edit=0 and timestamp 20130212003031 -->
<div class="printfooter">
Retrieved from "<a href="Backup.html">http://wiki.ess3.net/wiki/Backup</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
									</div>
			</div><!-- end of MAINCONTENT div -->	
		</div>
	
	</div><!-- end of MBODY div -->
	<div class="visualClear"></div>
	<div id="footer"><table style="width:100%;text-align:center;"><tr><td rowspan="5" style="width:5%;text-align:center;vertical-align:top;padding-right:1em;white-space:nowrap">
		<div id="f-copyrightico"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" alt="Attribution-NonCommercial-ShareAlike 3.0 Unported" width="88" height="31" /></a></div></td>
		<td align="center">
			<ul id="f-list">
					<li id="f-lastmod"> This page was last modified on 25 August 2012, at 16:08.</li>
					<li id="f-copyright">Content is available under <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" class="external ">Attribution-NonCommercial-ShareAlike 3.0 Unported</a>.</li>
					<li id="f-privacy"><a href="http://wiki.ess3.net/wiki/Essentials:Privacy_policy" title="Essentials:Privacy policy">Privacy policy</a></li>
					<li id="f-about"><a href="http://wiki.ess3.net/wiki/Essentials:About" title="Essentials:About">About Essentials</a></li>
					<li id="f-disclaimer"><a href="http://wiki.ess3.net/wiki/Essentials:General_disclaimer" title="Essentials:General disclaimer">Disclaimers</a></li>
</td>
<td rowspan="5" style="width:5%;text-align:center;vertical-align:top;padding-left:1em;white-space:nowrap"><div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="http://essentials3.net/cache/skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div></td></tr>
<tr><td><div>Essentials is one of the most popular Bukkit server plugins, for use on Minecraft servers.<br>Essentials is used on a wide range of servers, from large dedicated services, to home hosted servers.</div></td></tr>
<tr>
	<td>
		Mozilla Cavendish Theme based on Cavendish style by Gabriel Wicke modified by <a href="http://www.dasch-tour.de" target="_blank">DaSch</a><br/>
		<a href="http://sourceforge.net/projects/wecowi/">Sourceforge Projectpage</a> &ndash; <a href="https://sourceforge.net/apps/trac/wecowi/wiki">Bug Reports</a> &ndash; Skin-Version: 1.0.0	</td>
</tr>
</table>
	</div><!-- end of the FOOTER div -->
</div><!-- end of the CONTAINER div -->
<!-- scripts and debugging information -->

<script>if (window.runOnloadHook) runOnloadHook();</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-25111788-1");
pageTracker._trackPageview();
</script><!-- Served in 0.211 secs. -->
</body>
</html>
